@using System.Collections.Generic
@using System.Linq
@using Microsoft.AspNetCore.Components

@typeparam TModel
@inherits AdaptiveCardsBase<TModel>

@if (Models?.Any() == true)
{
    <div @attributes="Attributes" class="@(@class)">
        <CascadingValue Value="@RenderMode" Name="RenderMode">
            <CascadingValue Value="@TemplateSelector" Name="TemplateSelector">
                <CascadingValue Value="@Schema" Name="Template">
                    @for (var i = 0; i < Models.Count; i++)
                    {
                        <TemplatedAdaptiveCard TModel="TModel" Model="@Models[i]" Attributes="@(GetCardAttributes(i, Models[i]))"></TemplatedAdaptiveCard>
                    }
                </CascadingValue>
            </CascadingValue>
        </CascadingValue>
    </div>
}